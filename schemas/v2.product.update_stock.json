{
  "api_id": 652,
  "api_name": "v2.product.update_stock",
  "api_type": "Shop",
  "common_params": "[{\"name\":\"partner_id\",\"type\":\"int\",\"sample\":\"1\",\"description\":\"Partner ID is assigned upon registration is successful. Required for all requests.\"},{\"name\":\"timestamp\",\"type\":\"timestamp\",\"sample\":\"1610000000\",\"description\":\"This is to indicate the timestamp of the request. Required for all requests. Expires in 5 minutes.\"},{\"name\":\"access_token\",\"type\":\"string\",\"sample\":\"c09222e3fc40ffb25fc947f738b1abf1\",\"description\":\"The token for API access, using to identify your permission to the api. Valid for multiple use and expires in 4 hours.\"},{\"name\":\"shop_id\",\"type\":\"int\",\"sample\":\"600000\",\"description\":\"Shopee's unique identifier for a shop. Required param for most APIs.\"},{\"name\":\"sign\",\"type\":\"string\",\"sample\":\"e318d3e932719916a9f9ebb57e2011961bd47abfa54a36e040d050d8931596e2\",\"description\":\"Signature generated by partner_id, api path, timestamp, access_token, shop_id and partner_key via HMAC-SHA256 hashing algorithm. More details: <a href= https://open.shopee.com/documents?module=87&type=2&id=58&version=2> https://open.shopee.com/documents?module=87&type=2&id=58&version=2</a>\"}]",
  "define": "Use this API to update one item_id for each call, but still can support updating multiple model_ids stock of the same item_id (If you need batch modification, please call multiple times)This API will update only \"seller_stock\".Whenever there is a promotion ongoing or upcoming, the total stock must be larger than or equal to real-time “reserved_stock” promotion stock (Please check v2.get_item_promotion API for more details). Items that are deleted will not be allowed to modify stock.",
  "error_list": [
    {
      "name": "error_param",
      "description": "There is no access_token in query."
    },
    {
      "name": "error_auth",
      "description": "Invalid access_token."
    },
    {
      "name": "error_param",
      "description": "Invalid partner_id."
    },
    {
      "name": "error_param",
      "description": "There is no partner_id in query."
    },
    {
      "name": "error_auth",
      "description": "No permission to current api."
    },
    {
      "name": "error_param",
      "description": "There is no sign in query."
    },
    {
      "name": "error_sign",
      "description": "Wrong sign."
    },
    {
      "name": "error_param",
      "description": "no timestamp"
    },
    {
      "name": "error_param",
      "description": "Invalid timestamp"
    },
    {
      "name": "error_network",
      "description": "Inner http call failed"
    },
    {
      "name": "error_data",
      "description": "parse data failed"
    },
    {
      "name": "error_data",
      "description": "data not exist"
    },
    {
      "name": "error_param",
      "description": "parameter invalid"
    },
    {
      "name": "error_param",
      "description": "The information you queried is not found."
    },
    {
      "name": "error_param",
      "description": "Wrong parameters, detail: {msg}."
    },
    {
      "name": "error_server",
      "description": "Something wrong. Please try later.\t"
    },
    {
      "name": "error_shop",
      "description": "shopid is invalid"
    },
    {
      "name": "error_param",
      "description": "request not from gateway"
    },
    {
      "name": "error_item_not_belong_shop",
      "description": "Item not belong to shop."
    },
    {
      "name": "error_wms_shop_block_upate_stock",
      "description": "Warehouse shop can't update stock."
    },
    {
      "name": "error_auth",
      "description": "cnsc shop not upgraded, can not edit item."
    },
    {
      "name": "error_item_not_found",
      "description": "Item_id is not found."
    },
    {
      "name": "error_param_shop_id_not_found",
      "description": "Shop_id is not found."
    },
    {
      "name": "error_param",
      "description": "Parameter is not match the constraints, {{.error_info}}."
    },
    {
      "name": "error_param",
      "description": "Repeat model_id."
    },
    {
      "name": "error_param",
      "description": "Wrong model_id."
    },
    {
      "name": "error_busi_update_stock_failed",
      "description": "Update stock failed, please check failure_list for detailed reason"
    },
    {
      "name": "error_server",
      "description": "The current item belong to the full FBS shop, so normal stock must be equal to 0"
    },
    {
      "name": "error_inner",
      "description": "Our system is taking some time to respond, please try later."
    },
    {
      "name": "error_inner",
      "description": "System error, please try again later or contact the OpenAPI support team."
    },
    {
      "name": "error_item_not_found",
      "description": "Product not found"
    },
    {
      "name": "error_inner",
      "description": "Update item failed {{.error_info}}"
    },
    {
      "name": "error_inner",
      "description": "Update item failed {{.error_info}}"
    },
    {
      "name": "error_inner",
      "description": "System error, please try again later or contact the OpenAPI support team."
    },
    {
      "name": "error_inner",
      "description": "System error, please try again later or contact the OpenAPI support team."
    },
    {
      "name": "error_auth",
      "description": "The current item belong to the full FBS or B2C shop, so normal stock must be equal to 0"
    },
    {
      "name": "error_busi_cannot_edit_vsku",
      "description": "Can not use OpenAPI to edit/create VSKU, please connect with your manager"
    },
    {
      "name": "error_auth",
      "description": "The location_id input is not matched the shop's location_id(more/wrong). Please double check."
    },
    {
      "name": "error_auth",
      "description": "Lack of location_id, please double check."
    },
    {
      "name": "error_auth",
      "description": "Please wait for the holiday mode set then to edit item. Please try later."
    },
    {
      "name": "error_auth",
      "description": "Total stock must be more than reserved stock."
    },
    {
      "name": "error_param",
      "description": "{{.error_info}}"
    },
    {
      "name": "error_auth",
      "description": "Your shop can not use model level dts"
    },
    {
      "name": "error_auth",
      "description": "You do not have right to use seller location_id, please only fill seller_stock filed."
    },
    {
      "name": "error.param",
      "description": "Can not update item with stock less than reserved stock"
    },
    {
      "name": "error_inner",
      "description": "Invalid stock location ID"
    },
    {
      "name": "error_param",
      "description": "Can not update item with different stock structure. Can only update seller stock with location id when existing seller stock have location id. Can only update seller stock without location id when existing seller stock without location id."
    },
    {
      "name": "error_param",
      "description": "Can not update item with stock less than reserve stock"
    },
    {
      "name": "error_busi",
      "description": "The merchant/shop has multi warehouse, please input location id"
    },
    {
      "name": "error_auth",
      "description": "Stock should be larger than reserved stock."
    },
    {
      "name": "error_param",
      "description": "Invalid parameter for product."
    },
    {
      "name": "error_system_busy",
      "description": "Our system is taking some time to respond, please try later."
    },
    {
      "name": "error_seller_under_penalty",
      "description": "The shop is under penalty."
    },
    {
      "name": "error_nil_shopid_or_itemid",
      "description": "Query information failed."
    },
    {
      "name": "error_item_uneditable",
      "description": "Can't edit this item. item status can not support editing."
    },
    {
      "name": "error_perm_non_admin",
      "description": "Don't have permission."
    },
    {
      "name": "error_param",
      "description": "Can not update item with different stock structure. Can only update seller stock with location id when existing seller stock have location id. Can only update seller stock without location id when existing seller stock without location id."
    },
    {
      "name": "error_cannt_edit_stock_in_promotion",
      "description": "Normal_stock cannot be edited when item is under promotion."
    },
    {
      "name": "error_cannt_edit_stock_in_promotion",
      "description": "Normal_stock cannot be edited when item is under promotion."
    },
    {
      "name": "error_server",
      "description": "Interal error, please contact openapi team."
    },
    {
      "name": "error_holiday_mode_change_stock",
      "description": "Cannot change stock in holiday mode."
    },
    {
      "name": "error_promotion_cantnot_update_stock",
      "description": "Cannot change stock when item is under promotion."
    },
    {
      "name": "error_in_item_promotion_nomodel_to_models",
      "description": "Can't to edit item stock directly while item has models."
    },
    {
      "name": "error_model_update_stock_model_in_promotion",
      "description": "Model stock cannot be editted when item/model is promotion."
    },
    {
      "name": "error_edit_item_stock_for_item_has_model",
      "description": "Can't to edit item stock directly while item has models."
    }
  ],
  "errors": "",
  "gateway_api_id": 0,
  "is_get_method": 0,
  "method": 1,
  "module_id": 89,
  "module_name": "Product",
  "params": "{\"request_params\":[{\"name\":\"item_id\",\"limits\":\"\",\"required\":\"True\",\"sample\":\"1000\",\"type\":\"int64\",\"description\":\"ID of item.\",\"key\":\"BkEPJyS\"},{\"name\":\"stock_list\",\"limits\":\"\",\"required\":\"True\",\"sample\":\"\",\"type\":\"object[]\",\"children\":[{\"name\":\"model_id\",\"limits\":\"\",\"required\":\"False\",\"sample\":\"\",\"type\":\"int64\",\"description\":\"0 for no model item.\",\"key\":\"jWkszd\"},{\"description\":\"<p>new stock info（Please notice that stock(including Seller Stock and Shopee Stock) should be larger than or equal to real-time reserved stock）<br /></p>\",\"name\":\"seller_stock\",\"sample\":\"\",\"type\":\"object[]\",\"required\":\"True\",\"key\":\"ssPCPht\",\"children\":[{\"description\":\"<p>location id, you can get the location id from v2.shop.get_warehouse_detail api, if seller don't have any warehouse, you don't need to upload this field.<br /></p>\",\"name\":\"location_id\",\"sample\":\"\",\"type\":\"string\",\"required\":\"False\",\"key\":\"WGSxKia\"},{\"description\":\"<p>stock</p>\",\"name\":\"stock\",\"sample\":\"\",\"type\":\"int64\",\"required\":\"True\",\"key\":\"kscXkFK\"}]}],\"description\":\"Length should be between 1 to 50.\",\"key\":\"TXKfHxX\"}],\"response_params\":[{\"sample\":\"\",\"type\":\"string\",\"name\":\"error\",\"description\":\"Indicate error type if hit error. Empty if no error happened.\",\"key\":\"AxBTFzh\"},{\"sample\":\"\",\"type\":\"string\",\"name\":\"message\",\"description\":\"Indicate error details if hit error. Empty if no error happened.\",\"key\":\"zssrzsp\"},{\"sample\":\"\",\"type\":\"string\",\"name\":\"warning\",\"description\":\"Warning message.\",\"key\":\"MfGshiy\"},{\"sample\":\"\",\"type\":\"string\",\"name\":\"request_id\",\"description\":\"The identifier for an API request for error tracking.\",\"key\":\"NmSEFNe\"},{\"sample\":\"\",\"type\":\"object\",\"description\":\"\",\"name\":\"response\",\"children\":[{\"sample\":\"\",\"type\":\"object[]\",\"description\":\"Fail model list.\",\"name\":\"failure_list\",\"children\":[{\"sample\":\"\",\"type\":\"int64\",\"name\":\"model_id\",\"description\":\"ID of model.\",\"key\":\"QHmerSw\"},{\"sample\":\"\",\"type\":\"string\",\"name\":\"failed_reason\",\"description\":\"Reason for failure.\",\"key\":\"pdSeXAS\"}],\"key\":\"hNzEcrT\"},{\"sample\":\"\",\"type\":\"object[]\",\"description\":\"Success model list.\",\"name\":\"success_list\",\"children\":[{\"sample\":\"\",\"type\":\"int64\",\"name\":\"model_id\",\"description\":\"ID of model.\",\"key\":\"yBDmYdf\"},{\"description\":\"<p>location id; This field and the stock field are returned in pairs<br /></p>\",\"name\":\"location_id\",\"sample\":\"\",\"type\":\"string\",\"required\":null,\"key\":\"RMPzMfY\"},{\"description\":\"<p>stock;This field is returned if seller stock is used in the request, and normal stock fields are not returned.<br /></p>\",\"name\":\"stock\",\"sample\":\"\",\"type\":\"int64\",\"required\":null,\"key\":\"rZJpcif\"}],\"key\":\"PKrFmnj\"}],\"key\":\"GnktDiN\"}]}",
  "perm_mtime": 1682591808,
  "perm_operator": "tenghui.huang@shopee.com",
  "perm_type": 1,
  "perm_upload_file_name": "",
  "priority": 22,
  "rate_limit": "[0, 0, 0]",
  "request_sample": "[{\"type\":\"Payload\",\"value\":\"{\\n\\t\\\"item_id\\\": 1000,\\n\\t\\\"stock_list\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"model_id\\\": 0,\\n\\t\\t\\n\\t\\t\\t\\\"seller_stock\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"location_id\\\": \\\"-\\\",\\n\\t\\t\\t\\t\\t\\\"stock\\\": 0\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\"},{\"type\":\"Java\",\"value\":\"Unirest.setTimeouts(0, 0);\\nHttpResponse<String> response = Unirest.post(\\\"https://partner.shopeemobile.com/api/v2/product/update_stock?sign=sign&access_token=access_token&timestamp=timestamp&shop_id=shop_id&partner_id=partner_id\\\")\\n.header(\\\"Content-Type\\\",\\\"application/json\\\")\\n.body(\\\"{\\n   \\\\\\\"item_id\\\\\\\": 1000,\\n   \\\\\\\"stock_list\\\\\\\": [\\n      {\\n         \\\\\\\"model_id\\\\\\\": 0,\\n\\n         \\\\\\\"seller_stock\\\\\\\": [\\n            {\\n               \\\\\\\"location_id\\\\\\\": \\\\\\\"-\\\\\\\",\\n               \\\\\\\"stock\\\\\\\": 0\\n            }\\n         ]\\n      }\\n   ]\\n}\\\")\\n.asString();\"},{\"type\":\"PHP\",\"value\":\"<?php\\n\\n$curl = curl_init();\\n\\ncurl_setopt_array($curl, array(\\n  CURLOPT_URL => 'https://partner.shopeemobile.com/api/v2/product/update_stock?access_token=access_token&partner_id=partner_id&shop_id=shop_id&sign=sign&timestamp=timestamp',\\n  CURLOPT_RETURNTRANSFER => true,\\n  CURLOPT_ENCODING => '',\\n  CURLOPT_MAXREDIRS => 10,\\n  CURLOPT_TIMEOUT => 0,\\n  CURLOPT_FOLLOWLOCATION => true,\\n  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\\n  CURLOPT_CUSTOMREQUEST => 'POST',\\n  CURLOPT_POSTFIELDS => '{\\n    \\\"item_id\\\": 1000,\\n    \\\"stock_list\\\": [\\n        {\\n            \\\"model_id\\\": 0,\\n     \\n            \\\"seller_stock\\\": [\\n                {\\n                    \\\"location_id\\\": \\\"-\\\",\\n                    \\\"stock\\\": 0\\n                }\\n            ]\\n        }\\n    ]\\n}',\\n  CURLOPT_HTTPHEADER => array(\\n    'Content-Type: application/json'\\n  ),\\n));\\n\\n$response = curl_exec($curl);\\n\\ncurl_close($curl);\\necho $response;\\n\"},{\"type\":\"cURL\",\"value\":\"curl --location --request POST 'https://partner.shopeemobile.com/api/v2/product/update_stock?timestamp=timestamp&shop_id=shop_id&partner_id=partner_id&sign=sign&access_token=access_token' \\\\\\n--header 'Content-Type: application/json' \\\\\\n--data-raw '{\\n   \\\"item_id\\\": 1000,\\n   \\\"stock_list\\\": [\\n      {\\n         \\\"model_id\\\": 0,\\n\\n         \\\"seller_stock\\\": [\\n            {\\n               \\\"location_id\\\": \\\"-\\\",\\n               \\\"stock\\\": 0\\n            }\\n         ]\\n      }\\n   ]\\n}'\\n\"},{\"type\":\"Python\",\"value\":\"import requests\\nimport json\\n\\nurl = \\\"https://partner.shopeemobile.com/api/v2/product/update_stock?access_token=access_token&partner_id=partner_id&shop_id=shop_id&sign=sign&timestamp=timestamp\\\"\\n\\npayload=json.dumps({\\n  \\\"item_id\\\": 1000,\\n  \\\"stock_list\\\": [\\n    {\\n      \\\"model_id\\\": 0,\\n\\n      \\\"seller_stock\\\": [\\n        {\\n          \\\"location_id\\\": \\\"-\\\",\\n          \\\"stock\\\": 0\\n        }\\n      ]\\n    }\\n  ]\\n})\\nheaders = {\\n  'Content-Type': 'application/json'\\n}\\nresponse = requests.request(\\\"POST\\\",url,headers=headers, data=payload, allow_redirects=False)\\n\\nprint(response.text)\\n\"}]",
  "response_sample": "[{\"type\":\"JSON\",\"value\":\"{\\n\\t\\\"error\\\": \\\"-\\\",\\n\\t\\\"message\\\": \\\"-\\\",\\n\\t\\\"warning\\\": \\\"-\\\",\\n\\t\\\"request_id\\\": \\\"-\\\",\\n\\t\\\"response\\\": {\\n\\t\\t\\\"failure_list\\\": [\\n\\t\\t\\t{\\n\\t\\t\\t\\t\\\"model_id\\\": 0,\\n\\t\\t\\t\\t\\\"failed_reason\\\": \\\"-\\\"\\n\\t\\t\\t}\\n\\t\\t],\\n\\t\\t\\\"success_list\\\": [\\n\\t\\t\\t{\\n\\t\\t\\t\\t\\\"model_id\\\": 0,\\n\\t\\t\\t\\t\\\"location_id\\\": \\\"-\\\",\\n\\t\\t\\t\\t\\\"stock\\\": 0\\n\\t\\t\\t}\\n\\t\\t]\\n\\t}\\n}\"}]",
  "status": 1,
  "tag": "",
  "test_url": "https://partner.test-stable.shopeemobile.com/api/v2/product/update_stock",
  "update_log_list": [
    {
      "date": "2022-10-31",
      "content": "offline the normal_stock fields"
    },
    {
      "date": "2022-06-13",
      "content": "add reminder \"Please use the seller_stock field instead, we will deprecate this field in the future.\""
    }
  ],
  "url": "https://partner.shopeemobile.com/api/v2/product/update_stock",
  "version": "",
  "error_example": "[{\"type\":\"JSON\",\"value\":\"{\\n    \\\"error\\\": \\\"product.error_param\\\",\\n    \\\"message\\\": \\\"invalid field ItemId: value must  Not Null\\\",\\n    \\\"request_id\\\": \\\"11484dd6d9e203edd5d332551249de57\\\"\\n}\"}]",
  "api_permission": [
    "ERP System",
    "Seller In House System",
    "Product Management",
    "Swam ERP"
  ],
  "path": "/api/v2/product/update_stock"
}